<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Cricket Stream</title>
<style>
  body {
    background: linear-gradient(135deg, #001f3f, #003f7f);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  .container {
    position: relative;
    width: 90%;
    max-width: 700px;
    background: rgba(0, 40, 100, 0.9);
    border-radius: 15px;
    padding: 15px;
    box-shadow: 0 0 25px rgba(0, 100, 255, 0.5);
  }

  video {
    width: 100%;
    border-radius: 10px;
    background: #000;
    display: block;
  }

  #qualityMenu {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(0, 60, 150, 0.9);
    border: none;
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
  }

  /* Popup */
  .popup {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 20, 60, 0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  .popup-content {
    background: rgba(0, 60, 150, 1);
    color: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 0 20px rgba(0, 100, 255, 0.6);
  }

  .popup button {
    background: white;
    color: #003f7f;
    border: none;
    padding: 10px 18px;
    margin: 8px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }

  .popup button:hover {
    background: #e0e0e0;
  }
</style>
</head>
<body>

<div class="popup" id="popup">
  <div class="popup-content">
    <h2>Join Our Telegram Channel ðŸ“º</h2>
    <p>Watch Live Cricket Streams Free on Telegram!</p>
    <button onclick="joinNow()">Join Now</button>
    <button onclick="alreadyJoined()">Already Joined</button>
  </div>
</div>

<div class="container" id="mainContainer" style="display:none;">
  <select id="qualityMenu"></select>
  <video id="video" controls playsinline></video>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  const stream = "https://smart.bengaldigital.live/AstroCricket/index.m3u8";

  function joinNow() {
    window.open("https://t.me/+rwZKMV0-L8wyOTll", "_blank");
    setTimeout(alreadyJoined, 1500);
  }

  function alreadyJoined() {
    document.getElementById("popup").style.display = "none";
    document.getElementById("mainContainer").style.display = "block";
    initPlayer();
  }

  function initPlayer() {
    const video = document.getElementById("video");
    const menu = document.getElementById("qualityMenu");

    if (Hls.isSupported()) {
      const hls = new Hls();
      hls.loadSource(stream);
      hls.attachMedia(video);

      hls.on(Hls.Events.MANIFEST_PARSED, function (_, data) {
        data.levels.forEach((level, i) => {
          const opt = document.createElement("option");
          opt.value = i;
          opt.text = level.height + "p";
          menu.appendChild(opt);
        });

        const autoOpt = document.createElement("option");
        autoOpt.value = -1;
        autoOpt.text = "Auto";
        menu.appendChild(autoOpt);
        menu.value = -1;

        menu.addEventListener("change", function () {
          const level = parseInt(this.value);
          hls.currentLevel = level;
        });
      });
    } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
      video.src = stream;
    }
  }
</script>

</body>
</html>
